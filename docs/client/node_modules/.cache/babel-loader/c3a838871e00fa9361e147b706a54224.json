{"ast":null,"code":"var _jsxFileName = \"C:\\\\React tic tac toe\\\\Tic-Tac-Toe\\\\docs\\\\client\\\\src\\\\Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button } from 'reactstrap';\nimport { io } from 'socket.io-client';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Game = props => {\n  _s();\n\n  const [squares, setSquares] = useState(null);\n  const [isX, setIsX] = useState(null);\n  const [status, setStatus] = useState(null);\n  const [socket, setSocket] = useState();\n  const [userCredentials, setUserCredentials] = useState(null);\n  const [opponent, setOpponent] = useState(null);\n  const {\n    name,\n    channel\n  } = props.location.state;\n\n  if (channel > 100 || channel <= 0 || channel === null || name === null) {\n    props.history.push({\n      pathname: '/',\n      state: 'Please Enter Valid Channel No'\n    });\n  }\n\n  const leave = () => {\n    props.history.push('/'); // props.history.goBack()\n    // <Redirect to='/'/>\n  };\n\n  useEffect(() => {\n    if (props.history === null || channel === null) return;\n    axios.get(`${process.env.REACT_APP_API}/credentials?channel=${channel}`).then(res => {\n      if (res.data.msg) {\n        props.history.push({\n          pathname: '/',\n          state: 'Channel is Full. Join Another Channel'\n        });\n      } else {\n        setUserCredentials(res.data.info);\n      }\n    }).catch(err => console.log(err));\n    return () => {\n      setUserCredentials(null);\n    };\n  }, []);\n  useEffect(() => {\n    const s = io('http://localhost:5000');\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    if (socket === null || userCredentials === null || channel === null || name === null) return;\n    socket.emit('get-data', {\n      name,\n      userCredentials,\n      channel\n    });\n    socket.on('giveOwnSocketId', () => {\n      socket.emit('takeSocketId', socket.id);\n    });\n    socket.on('opponent', opp => {\n      setOpponent(opp);\n    });\n    socket.on('getSquaresAndx', (resp, change) => {\n      if (change === true) {\n        setSquares(resp.squares);\n        setIsX(resp.isX);\n      }\n    });\n    return () => {\n      socket.off('giveOwnSocketId', () => {\n        socket.emit('takeSocketId', socket);\n      });\n      socket.off('opponent', opp => {\n        setOpponent(opp);\n      });\n      socket.off('getSquaresAndx', (resp, change) => {\n        if (change === true) {\n          setSquares(resp.squares);\n          setIsX(resp.isX);\n        }\n      });\n    };\n  }, [socket, userCredentials]);\n  useEffect(() => {\n    if (socket === null || userCredentials === null) return;\n    var x = document.querySelectorAll(\".Square\");\n    x.forEach((elem, index) => {\n      elem.addEventListener('click', () => {\n        socket.emit('sqClicked', index);\n      });\n    });\n    var x1 = document.getElementById('reset');\n    x1.addEventListener('click', () => {\n      socket.emit('reset');\n    });\n    return () => {\n      x.forEach((elem, index) => {\n        elem.removeEventListener('click', () => {\n          socket.emit('sqClicked', index);\n        });\n      });\n      x1.removeEventListener('click', () => {\n        socket.emit('reset');\n      });\n    };\n  }, [socket, userCredentials]);\n  useEffect(() => {\n    if (squares === null) return;\n    var win = 0,\n        draw = 1,\n        winner;\n    const winningcomb = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\n    for (const comb of winningcomb) {\n      const [a, b, c] = comb;\n\n      if (squares[a] && squares[b] === squares[a] && squares[a] === squares[c]) {\n        win = 1;\n        winner = squares[a];\n      }\n    }\n\n    squares.forEach(sq => {\n      if (sq === null) draw = 0;\n    });\n\n    if (win === 1) {\n      alert(`Winner is ${winner}`);\n      setStatus(`Winner is ${winner}`);\n    } else if (draw === 1) {\n      alert('The Game ended in Draw');\n      setStatus('The Game ended in Draw');\n    }\n\n    return () => {\n      setStatus(null);\n    };\n  }, [squares]);\n  const headerStyle = {\n    margin: \"30px auto\",\n    fontWeight: 'bold',\n    fontSize: '40px',\n    textDecoration: 'underline'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"center\",\n      style: headerStyle,\n      children: [\"Tic-Tac-Toe   \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"glyphicon glyphicon-play-circle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Board\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" text-primary\",\n        style: {\n          fontSize: '18px'\n        },\n        children: [\"You : \", name !== null && name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-primary\",\n        style: {\n          fontSize: '18px'\n        },\n        children: [\" Opponent : \", opponent !== null && opponent]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chance text-primary\",\n        children: [\"Your Character : \", userCredentials !== null && userCredentials.userIsX ? 'X' : 'O']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chance text-warning\",\n        children: [\" \", status === null ? `Now Chance : ${isX !== null && isX ? 'X' : 'O'}` : status, \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Board-row\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[0], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[1], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[2], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Board-row\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[3], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[4], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[5], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Board-row\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[6], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[7], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"Square\",\n          color: \"dark\",\n          outline: true,\n          children: [\" \", squares === null ? null : squares[8], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-5 mx-auto\",\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        maxWidth: '15%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        size: \"lg\",\n        onClick: leave,\n        color: \"primary\",\n        children: \"Leave\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"lg\",\n        id: \"reset\",\n        color: \"primary\",\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Game, \"lxkRJWyxJAmO4N0RSAJ+/E3Ch5c=\");\n\n_c = Game;\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["C:/React tic tac toe/Tic-Tac-Toe/docs/client/src/Game.js"],"names":["React","useState","useEffect","Button","io","axios","Game","props","squares","setSquares","isX","setIsX","status","setStatus","socket","setSocket","userCredentials","setUserCredentials","opponent","setOpponent","name","channel","location","state","history","push","pathname","leave","get","process","env","REACT_APP_API","then","res","data","msg","info","catch","err","console","log","s","disconnect","emit","on","id","opp","resp","change","off","x","document","querySelectorAll","forEach","elem","index","addEventListener","x1","getElementById","removeEventListener","win","draw","winner","winningcomb","comb","a","b","c","sq","alert","headerStyle","margin","fontWeight","fontSize","textDecoration","userIsX","display","justifyContent","maxWidth"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { Button } from 'reactstrap'\r\nimport {io} from 'socket.io-client'\r\nimport axios from 'axios'\r\n\r\n\r\nconst Game = (props) => {\r\n    const [squares,setSquares]=useState(null)\r\n    const [isX,setIsX]=useState(null)\r\n    const [status,setStatus]=useState(null)\r\n    const [socket,setSocket]=useState()\r\n    const [userCredentials,setUserCredentials]=useState(null)\r\n    const [opponent,setOpponent]=useState(null)\r\n    const {name,channel}=props.location.state\r\n    if(channel>100 || channel<=0 || channel===null || name===null){\r\n        props.history.push({pathname:'/',state:'Please Enter Valid Channel No'})\r\n    }\r\n\r\n    const leave=()=>{\r\n        props.history.push('/')\r\n        // props.history.goBack()\r\n        // <Redirect to='/'/>\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(props.history===null || channel===null)\r\n            return\r\n        axios.get(`${process.env.REACT_APP_API}/credentials?channel=${channel}`)\r\n        .then(res=>{\r\n            if(res.data.msg){\r\n                props.history.push({pathname:'/',state:'Channel is Full. Join Another Channel'})\r\n            }\r\n            else{\r\n                setUserCredentials(res.data.info)\r\n                \r\n            }\r\n        })\r\n        .catch(err=>console.log(err))\r\n        return () => {\r\n            setUserCredentials(null)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(()=>{\r\n        const s=io('http://localhost:5000')\r\n        setSocket(s)\r\n        return ()=>{\r\n            s.disconnect()\r\n        }\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        if(socket===null || userCredentials===null || channel===null || name===null)\r\n            return\r\n        socket.emit('get-data',{name,userCredentials,channel})\r\n\r\n        socket.on('giveOwnSocketId',()=>{\r\n            socket.emit('takeSocketId',socket.id)\r\n        })\r\n        socket.on('opponent',opp=>{\r\n            setOpponent(opp)\r\n        })\r\n\r\n        socket.on('getSquaresAndx',(resp,change)=>{\r\n            if(change===true){\r\n                setSquares(resp.squares)\r\n                setIsX(resp.isX)\r\n            }\r\n        })\r\n        return () => {\r\n            socket.off('giveOwnSocketId',()=>{\r\n                socket.emit('takeSocketId',socket)\r\n            })\r\n            socket.off('opponent',opp=>{\r\n                setOpponent(opp)\r\n            })\r\n    \r\n            socket.off('getSquaresAndx',(resp,change)=>{\r\n                if(change===true){\r\n                    setSquares(resp.squares)\r\n                    setIsX(resp.isX)\r\n                }\r\n            })\r\n        }\r\n    }, [socket,userCredentials])\r\n\r\n\r\n    useEffect(()=>{\r\n        if(socket===null || userCredentials===null )\r\n            return\r\n        var x=document.querySelectorAll(\".Square\")\r\n        x.forEach((elem,index)=>{\r\n            elem.addEventListener('click',()=>{\r\n                socket.emit('sqClicked',index)\r\n            })\r\n        })\r\n        var x1=document.getElementById('reset')\r\n        x1.addEventListener('click',()=>{\r\n            socket.emit('reset')\r\n        })\r\n        return ()=>{\r\n            x.forEach((elem,index)=>{\r\n                elem.removeEventListener('click',()=>{\r\n                    socket.emit('sqClicked',index)\r\n                })\r\n            })\r\n            x1.removeEventListener('click',()=>{\r\n                socket.emit('reset')\r\n            })\r\n        }\r\n    },[socket,userCredentials])\r\n\r\n    useEffect(()=>{\r\n        if(squares===null)\r\n            return\r\n        var win=0,draw=1,winner\r\n        \r\n        const winningcomb=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]\r\n        for(const comb of winningcomb) \r\n        {\r\n            const [a,b,c]=comb\r\n            if(squares[a] && squares[b]===squares[a] && squares[a]===squares[c])\r\n            {\r\n                win=1\r\n                winner=squares[a]\r\n            }\r\n        }\r\n        squares.forEach((sq)=>{\r\n            if(sq===null)\r\n                draw=0\r\n        })\r\n\r\n        if(win===1){\r\n            alert(`Winner is ${winner}`)\r\n            setStatus(`Winner is ${winner}`)\r\n        }\r\n        else if(draw===1){\r\n            alert('The Game ended in Draw')\r\n            setStatus('The Game ended in Draw')\r\n        }\r\n\r\n        return()=>{\r\n            setStatus(null)\r\n        }\r\n\r\n    },[squares])\r\n\r\n    \r\n   \r\n    const headerStyle={\r\n        margin: \"30px auto\",\r\n        fontWeight:'bold',\r\n        fontSize:'40px',\r\n        textDecoration:'underline' \r\n      }\r\n    return (\r\n      <div className=\"App\">\r\n          \r\n\r\n        {/* header  */}\r\n        <h1 className=\"center\" style={headerStyle}>\r\n          Tic-Tac-Toe   <span className=\"glyphicon glyphicon-play-circle\"></span>\r\n        </h1>\r\n\r\n        {/* board  */}\r\n        <div className=\"Board\">\r\n        <div className=\" text-primary\" style={{fontSize:'18px'}}>You : {name!==null && name}</div>\r\n        <div className=\"mb-4 text-primary\" style={{fontSize:'18px'}}> Opponent : {opponent!==null && opponent}</div>\r\n        <div className=\"chance text-primary\">Your Character : {userCredentials!==null && userCredentials.userIsX?'X':'O'}</div>\r\n        <div className=\"chance text-warning\"> {status===null?`Now Chance : ${isX!==null && isX?'X':'O'}` : status}  </div>\r\n\r\n        {/* board */}\r\n         <div className=\"Board-row\">\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[0]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[1]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[2]} </Button>\r\n         </div> \r\n         <div className=\"Board-row\">\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[3]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[4]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[5]} </Button>\r\n         </div>    \r\n         <div className=\"Board-row\">\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[6]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[7]} </Button>\r\n            <Button className=\"Square\" color=\"dark\" outline> {squares===null?null:squares[8]} </Button>\r\n         </div> \r\n        </div>\r\n        <div className=\"mt-5 mx-auto\" style={{display:'flex',justifyContent:'space-between',maxWidth:'15%'}}>\r\n            <Button size=\"lg\" onClick={leave} color=\"primary\" >Leave</Button>\r\n            <Button size=\"lg\" id=\"reset\" color=\"primary\" >Reset</Button>\r\n        </div>\r\n        \r\n         \r\n    </div>\r\n    );\r\n} \r\n \r\nexport default Game\r\n"]},"metadata":{},"sourceType":"module"}